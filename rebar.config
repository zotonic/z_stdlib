{require_min_otp_vsn, "18"}.

{erl_opts, [
  debug_info,

  warn_unused_vars,
  warn_shadow_vars,
  warn_unused_import,

  {platform_define, "^[0-9]+", namespaced_dicts},
  {platform_define, "^(19|2)", rand_only},
  {platform_define, "^(R|1|20)", fun_stacktrace}
 ]
}.

{profiles, [
    {test, [
        {deps, [
            {proper, ".*", {git, "git://github.com/manopapad/proper.git", {tag, "v1.2"}}},
            {mochiweb, ".*", {git, "https://github.com/mochi/mochiweb.git", {tag, "v2.16.0"}}},
            {eiconv, ".*", {git, "git://github.com/zotonic/eiconv.git", {branch, "master"}}},
            {erlang_localtime, ".*", {git, "git://github.com/dmitryme/erlang_localtime.git", {branch, master}}}
        ]},

        {xref_checks, [
            undefined_function_calls,
            locals_not_used,
            deprecated_function_calls
        ]},

        {xref_ignores, [
            {z_css_parser, return_error, 2},
            {z_trans, lookup_fallback, 2}
        ]},

        {dialyzer, [
          {warnings, [
              no_unused
          ]}
        ]}
    ]}
]}.
